#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

const PAGES = [
  {
    file: 'html/ai-consulting.html',
    title: 'AI Strategy That Ships',
    description: 'From use-case identification to production deployment. AI roadmap, integration strategy, team training, and governance frameworks.'
  },
  {
    file: 'html/ai-solutions.html',
    title: 'AI solutions that automate your business and crush the competition.',
    description: 'Custom AI integrations, intelligent agents, and automated workflows that eliminate manual work and scale your operations.'
  },
  {
    file: 'html/custom-development.html',
    title: 'Custom Software. Your Infrastructure. Your Terms.',
    description: '100% ownership. 60% average cost reduction vs SaaS alternatives. Zero vendor lock-in. Switch, scale, or sell on your terms.'
  }
];

function updateHeroSection(html, title, description) {
  // Simple approach: Replace the text content within the h1, keeping structure simple
  // Since the char/word spans are generated by JS, we'll just put the text and let JS regenerate

  // Replace the h1 title content - find the h1 with class c-heading-1 and replace its entire content
  html = html.replace(
    /(<h1 class="c-heading-1"[^>]*>)[\s\S]*?(<\/h1>)/,
    `$1${title}$2`
  );

  // Replace the description text - find the p with class c-text-1 in the hero section
  // This is trickier because there are multiple c-text-1 elements
  // We need to find the one in the hero grid
  html = html.replace(
    /(<div id="w-node-[^"]*" class="c-grid_text--cd5--ct7"><p class="c-text-1"[^>]*>)[\s\S]*?(<\/p><\/div><div id="w-node-[^"]*" class="c-grid_btn--ct3--st10">)/,
    `$1${description}$2`
  );

  return html;
}

function processPage(pageConfig) {
  const filePath = path.join('/Users/imorgado/downloaded_sites', pageConfig.file);

  console.log(`\nProcessing: ${pageConfig.file}`);
  console.log(`  Title: ${pageConfig.title}`);
  console.log(`  Description: ${pageConfig.description}`);

  let html = fs.readFileSync(filePath, 'utf-8');

  // Update hero section
  html = updateHeroSection(html, pageConfig.title, pageConfig.description);

  // Write back
  fs.writeFileSync(filePath, html, 'utf-8');

  console.log(`  âœ“ Updated`);
}

console.log('Updating hero sections for Douro Digital service pages\n');
console.log('='.repeat(60));

PAGES.forEach(processPage);

console.log('\n' + '='.repeat(60));
console.log('All hero sections updated!\n');
