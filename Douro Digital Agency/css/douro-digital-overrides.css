/**
 * Douro Digital Custom Overrides
 * WCAG AA Accessibility Fixes and Custom Styling
 */

/* Contact Form — minimal underline style */
section[white] .c-input_contact::placeholder,
section[white] .w-input::placeholder {
    color: #666 !important;
}

section[white] .c-input_contact,
section[white] .w-input,
section[white] .w-select,
section[white] textarea {
    background-color: transparent !important;
    border: none !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15) !important;
    border-radius: 0 !important;
    color: #ffffff !important;
    padding-left: 0 !important;
}

section[white] .c-input_contact:focus,
section[white] .w-input:focus,
section[white] .w-select:focus,
section[white] textarea:focus {
    border-bottom-color: rgba(255, 255, 255, 0.4) !important;
    outline: none !important;
}

/* Send Message button — white text */
.c-text-1_button.cc-button,
.c-button.cc-submit,
.c-button.cc-submit input,
input.c-text-1_button {
    color: #ffffff !important;
}

/* Ensure error states are visible */
section[white] .c-input_contact.w--redirected-checked,
section[white] .w-input.w--redirected-checked {
    border-bottom-color: #d32f2f !important;
}

/* Left-panel menu — Refokus-style slide-in */
.c-nav_menu {
    border: none !important;
    border-right: 1px solid rgba(255, 255, 255, 0.08) !important;
    border-radius: 0 !important;
    width: 420px !important;
    max-width: 90vw !important;
    right: auto !important;
    height: 100dvh !important;
    margin: 0 !important;
    transition-property: transform !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
    padding: 2em 2em 1.5em !important;
}
/* Hide menu scrollbar */
.c-nav_menu::-webkit-scrollbar {
    display: none;
}
.c-nav_menu {
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
}
/* Menu backdrop — darken right side when menu is open */
.nav-menu_bg-click {
    background-color: rgba(0, 0, 0, 0.5) !important;
    backdrop-filter: blur(2px) !important;
}
/* Nav list fills space, pushes mini-links to bottom */
.c-nav_list {
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
    flex: 1 !important;
    overflow-y: auto !important;
}
/* Tighter nav item spacing */
.c-nav_menu .c-nav_link {
    margin-bottom: 0 !important;
    padding-top: 10px !important;
    padding-bottom: 10px !important;
}
.c-nav_menu .c-nav_link.cc-solutions {
    margin-bottom: 0 !important;
    padding-top: 6px !important;
    padding-bottom: 6px !important;
}
.c-nav_list_group.cc-contact {
    margin-top: auto !important;
    margin-bottom: 0 !important;
}
/* Mini-links at bottom — 2 column grid */
.c-nav_list_group.mini-links {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 0.5em 2em !important;
    margin-top: auto !important;
    padding-top: 2em !important;
    border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
}
.c-mini-link_wrapper {
    font-size: 0.85em !important;
    opacity: 0.6 !important;
    transition: opacity 0.3s !important;
}
.c-mini-link_wrapper:hover {
    opacity: 1 !important;
}

/* Services dropdown underline — uses base absolute positioning */
/* Nav dropdown — proper Refokus structure */
.c-nav_solutions {
    display: flex;
    flex-direction: column;
    gap: 0;
    margin-top: 0.5em;
}
.c-nav_link.cc-solutions {
    display: flex !important;
    align-items: center !important;
    gap: 1em !important;
    padding: 0.4em 0 !important;
}
.c-nav_link-preview {
    width: 48px !important;
    height: 48px !important;
    border-radius: 6px !important;
    overflow: hidden !important;
    flex-shrink: 0 !important;
}
.c-nav_link-preview-img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
}
.c-nav_link-text .c-text-4 {
    font-size: 0.85em !important;
}
.c-nav_link-text .c-text-4.cc-gray {
    color: rgba(255, 255, 255, 0.5) !important;
    font-size: 0.75em !important;
}
.c-nav-dropdown_cross-wrapper {
    position: relative !important;
    width: 16px !important;
    height: 16px !important;
    margin-left: auto !important;
    flex-shrink: 0 !important;
}
.c-nav-dropdown_line {
    position: absolute !important;
    top: 50% !important;
    left: 0 !important;
    width: 100% !important;
    height: 1.5px !important;
    background-color: currentColor !important;
    transform: translateY(-50%) !important;
    transition: transform 0.3s ease !important;
}
.c-nav-dropdown_line.cc-rotate {
    transform: translateY(-50%) rotate(90deg) !important;
}
.c-nav_list_dropdown.cc-active .c-nav-dropdown_line.cc-rotate {
    transform: translateY(-50%) rotate(0deg) !important;
}

/* Mini-links (News & Insights, LinkedIn, Instagram, Twitter) — white text */
.c-mini-link_wrapper,
.c-mini-link_wrapper div,
.c-mini-link_text-wrapper,
.c-mini-link_text-wrapper div {
    color: #ffffff !important;
    opacity: 1 !important;
}

/* Services dropdown trigger layout */
.c-nav_dropdown-trigger {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    cursor: pointer !important;
}

/* Fix: Logo always white */
.c-nav_brand-logo img {
    filter: brightness(0) invert(1) !important;
}

/* Hero title: full width, left-aligned */
.c-title02--gd1--cd12 {
    width: 100%;
}
.c-title02_text--cd8--sd5 {
    --col-start: 1;
    --col-span: 12;
    grid-column-start: 1 !important;
    grid-column-end: -1 !important;
    width: 100% !important;
    max-width: 100% !important;
}

/* Services section: reduce top padding so "Reclaim 20 Hours" starts near nav */
.c-hero + section[white].c-section {
    padding-top: 2em !important;
}

/* Testimonials section — dark theme, right-aligned heading, red label */
section[white].c-section:has(.c-testimonial--gd1--cd12) .c-overhead {
    color: #FF0000 !important;
}
section[white].c-section:has(.c-testimonial--gd1--cd12) .c-title02_text--cd8--sd5 {
    text-align: right !important;
}

/* Force visibility for GSAP-hidden elements */
[testimonials-slider],
[testimonials-slider] .c-home-testimonial_image,
.c-home-testimonials_wrapper,
.c-home-testimonials_wrapper .c-text-1,
.c-home-testimonials_wrapper .c-text-3,
.c-home-testimonials_wrapper .c-text-4,
.c-testimonial--gd1--cd12 .c-heading-3,
.c-testimonial--gd1--cd12 .c-line,
.c-testimonial--gd1--cd12 .c-text-1,
.c-testimonial--gd1--cd12 .c-button,
.c-testimonial--gd1--cd12 .c-overhead {
    opacity: 1 !important;
    filter: none !important;
}
/* Force GSAP SplitText wrappers visible */
.c-home-testimonials_wrapper .line,
.c-home-testimonials_wrapper .word,
.c-home-testimonials_wrapper .char,
.c-testimonial--gd1--cd12 .line,
.c-testimonial--gd1--cd12 .word,
.c-testimonial--gd1--cd12 .char {
    opacity: 1 !important;
    filter: none !important;
    transform: none !important;
}
/* Fix quote text rendering — needs explicit stacking context */
.c-home-testimonial_content .c-text-1 {
    position: relative !important;
    z-index: 2 !important;
}

/* Custom fade carousel — larger images, centered */
.c-home-testimonial_image-wrapper {
    overflow: hidden;
    border-radius: 8px;
    width: 100% !important;
    max-width: 320px !important;
    height: auto !important;
    aspect-ratio: 3/4 !important;
    margin: 0 auto !important;
    flex-shrink: 0 !important;
}
.c-home-testimonial_image {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    object-position: center center !important;
}
.c-testimonial_wrapper {
    display: flex !important;
    flex-direction: row-reverse !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 2em !important;
    overflow: hidden !important;
}

/* Marquee logos section: remove excess spacing */
section[white].c-section:has(.c-logos),
.c-logos {
    padding-top: 0.5em !important;
    padding-bottom: 0.5em !important;
}
/* Also target parent section directly */
.c-logos ~ *,
.c-logos {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}

/* Marquee logos: white, consistent height, natural width */
.c-marquee_logo {
    filter: brightness(0) invert(1) !important;
    width: auto !important;
    max-width: none !important;
    height: 28px !important;
    opacity: 0.7;
}

/* Ensure marquee items don't overlap */
.c-marquee .w-dyn-item {
    flex-shrink: 0 !important;
    padding: 0 2.5em !important;
}

/* Navigation menu enhancements — base CSS handles underline positioning */

/* Improved button contrast */
.c-button {
    transition: all 0.3s ease;
}

.c-button:hover {
    transform: translateY(-2px);
}

.c-button:focus {
    outline: 2px solid #0066cc;
    outline-offset: 4px;
}

/* Link contrast improvements */
a {
    text-decoration-skip-ink: auto;
}

a:focus-visible {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
    border-radius: 2px;
}

/* Hide Webflow partner badge */
.c-webflow-badge,
a:has(.c-webflow-badge) {
    display: none !important;
}

/* Remove Refokus-specific external dependencies that might block */
iframe[src*="intellimize"],
script[src*="intellimize"],
link[href*="intellimize"] {
    display: none !important;
}

/* Ensure content is never hidden by anti-flicker */
.anti-flicker,
.anti-flicker * {
    visibility: visible !important;
    opacity: 1 !important;
}

/* Footer CTAs — always show text, bezier enlarge + color on hover */
.c-services,
.c-get-in-touch {
    transition: background-color 0.5s cubic-bezier(0.22, 1, 0.36, 1),
                color 0.5s cubic-bezier(0.22, 1, 0.36, 1),
                transform 0.5s cubic-bezier(0.22, 1, 0.36, 1) !important;
}
.c-services:hover,
.c-get-in-touch:hover {
    transform: scale(1.02) !important;
}

/* Always show the hidden text blocks */
.c-footer-cta-block.cc-2,
.c-footer-cta-block.cc-2-git {
    max-height: none !important;
    overflow: visible !important;
}

/* Both sections: white bg + black text on hover */
.c-services:hover,
.c-get-in-touch:hover {
    background-color: #ffffff !important;
    color: #1a1a1a !important;
}
.c-services:hover .c-overhead,
.c-services:hover .c-heading-6,
.c-services:hover .c-heading-3,
.c-services:hover .c-text-1,
.c-services:hover .c-text-4,
.c-services:hover p,
.c-get-in-touch:hover .c-overhead,
.c-get-in-touch:hover .c-heading-6,
.c-get-in-touch:hover .c-heading-3,
.c-get-in-touch:hover .c-text-1,
.c-get-in-touch:hover .c-text-4,
.c-get-in-touch:hover p {
    color: #1a1a1a !important;
}
.c-services:hover .c-footer-ctas-arrow svg,
.c-services:hover .c-button svg,
.c-get-in-touch:hover .c-footer-ctas-arrow svg,
.c-get-in-touch:hover .c-button svg {
    color: #1a1a1a !important;
}
.c-services:hover .c-button_line rect,
.c-get-in-touch:hover .c-button_line rect {
    fill: #1a1a1a !important;
}

/* Testimonials — decorative quote mark */
.c-home-testimonial_content {
    position: relative !important;
    padding-top: 1em !important;
    text-align: right !important;
}
.c-home-testimonial_content::before {
    content: "\201C";
    font-size: 10rem;
    line-height: 0.6;
    display: block;
    color: rgba(255, 255, 255, 0.25);
    font-family: Georgia, "Times New Roman", serif;
    pointer-events: none;
    margin-bottom: -0.1em;
    text-align: right;
}
/* Testimonials — bigger, bold quote text */
.c-home-testimonial_content .c-text-1 {
    font-size: 1.4em !important;
    line-height: 1.55 !important;
    font-weight: 700 !important;
}

/* Red hover theme — Portfolio link in testimonials section */
section[white].c-section:has(.c-testimonial--gd1--cd12) .c-button:hover,
section[white].c-section:has(.c-testimonial--gd1--cd12) a:hover {
    color: #FF0000 !important;
}

/* Red hover theme — "Learn more" service links + Portfolio + buttons */
.c-service-row_link:hover,
.c-service-row_link:hover .c-service-row_link-text,
.c-service-row_link:hover .c-service-row_link-arrow,
.c-button:hover,
.c-button:hover .c-text-1,
.c-button:hover .c-button_text-wrap,
.c-button:hover .c-button_arrow-wrap {
    color: #FF0000 !important;
}
.c-service-row_link:hover svg path,
.c-button:hover svg path {
    stroke: #FF0000 !important;
}
.c-button:hover .c-button_line rect {
    fill: #FF0000 !important;
}

/* Testimonials — remove excess min-height, tighter spacing */
section[white].c-section:has(.c-testimonial--gd1--cd12) {
    min-height: auto !important;
    padding-top: 2em !important;
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
}
section[white].c-section:has(.c-testimonial--gd1--cd12) .c-testimonial--gd1--cd12 {
    gap: 0 !important;
    row-gap: 0 !important;
}
/* Ensure dots container doesn't get clipped */
.c-home-testimonials_wrapper {
    overflow: visible !important;
}
.c-grid_item--cd9.cc-testimonial-col {
    overflow: visible !important;
}

/* Testimonials — mobile responsive */
@media (max-width: 991px) {
    .c-testimonial_wrapper {
        flex-direction: column !important;
        align-items: center !important;
    }
    .c-home-testimonial_image-wrapper {
        max-width: 300px !important;
    }
    .c-home-testimonial_content {
        text-align: center !important;
    }
    .c-home-testimonial_content .c-text-1 {
        font-size: 1.15em !important;
    }
    .c-home-testimonial_content::before {
        font-size: 6rem;
        text-align: center;
    }
    .c-grid_item--cd3.cc-cta.cc-hide-tablet {
        display: none !important;
    }
}
@media (max-width: 479px) {
    .c-home-testimonial_image-wrapper {
        max-width: 220px !important;
    }
    .c-home-testimonial_content .c-text-1 {
        font-size: 1em !important;
    }
    .c-home-testimonial_content::before {
        font-size: 4rem;
    }
}

/* Force scroll to always work — override Webflow/GSAP overflow locks */
html, body {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    overscroll-behavior: auto !important;
}

/* Force all backgrounds to pure black */
body,
html,
.page-wrapper,
.c-section,
section,
section[white],
.c-hero,
.c-section.cc-hero-about,
.c-body-cs,
.c-body-cs.cc-body--cstemp,
[theme],
[theme="dark"],
.footer-wrap,
.c-footer,
.c-bg,
.c-bg.cc-footer,
.c-cs-temp_zoom-bg,
.c-cs-temp_zoom-bg_gradient,
.c-cs-temp_hero,
.c-cs-temp_highlight-background,
.c-cs-temp_highlight-background_img,
.c-cs-temp_outcome-card,
.portfolio_bg,
[section-theme],
[section-theme="dark"],
main,
article,
div[style*="background"] {
    background-color: #000000 !important;
    background-image: none !important;
    background: #000000 !important;
}

/* Hide hero gradient/video overlays — force pure black */
.c-gradient,
.c-bg video,
.c-hero .c-bg,
.c-section.cc-hero-about .c-bg,
.c-section.cc-hero-about .c-gradient {
    display: none !important;
}

/* Service page hero backgrounds — pure black */
.c-section.cc-hero-about,
.c-section.cc-cs-hero,
[section-theme="dark"],
[hero],
.c-container,
.c-hero-wrap,
.c-hero_text,
.footer-wrap {
    background: #000000 !important;
    background-color: #000000 !important;
    background-image: none !important;
}

/* Hero image styling - layout now in refokus-base.css */
.c-hero_intro.cc-about .a-img,
.c-hero_intro.cc-about .a-img_inner {
    opacity: 1 !important;
    width: 100% !important;
    height: auto !important;
    border-radius: 12px !important;
    overflow: hidden !important;
}
.c-hero_intro.cc-about video,
.c-hero_intro.cc-about img {
    width: 100% !important;
    height: auto !important;
    object-fit: cover !important;
    border-radius: 12px !important;
}

/* Force all section backgrounds black */
section[white],
section[white].c-section,
section[white].c-section.cc-pb0,
section.c-section,
.c-section.cc-dark-0,
.c-section.cc-no-overflow {
    background: #000000 !important;
    background-color: #000000 !important;
}

html.animating,
.animating body {
    overflow-y: auto !important;
}

/* Hydration safety — when [no-animation] is set, force GSAP SplitText spans visible */
[no-animation] .char,
[no-animation] .word,
[no-animation] .line {
    opacity: 1 !important;
    filter: none !important;
    transform: none !important;
}

/* Smooth scrolling — only for anchor links, not on <html> (conflicts with GSAP ScrollTrigger) */
a[href^="#"] {
    scroll-behavior: smooth;
}

/* Service pages: eliminate the sticky hero dead zone (base CSS sets top: -850px,
   which eats ~850px of scroll with no visible change, making the page appear frozen) */
.c-section.cc-hero-about {
    position: relative !important;
    top: 0 !important;
}

/* Improved focus indicators for keyboard navigation */
*:focus-visible {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
}

/* Ensure videos don't autoplay with sound */
video {
    muted: true;
}

/* Print styles */
@media print {
    .c-nav,
    .c-footer,
    video,
    .c-button_arrow-wrap {
        display: none !important;
    }

    .c-section {
        page-break-inside: avoid;
    }

    a::after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
        color: #666;
    }
}

/* Case study cards — pure black default, dark red hover */
.c-project-item .portfolio_bg {
    background-color: #000000 !important;
    transition: background-color 0.3s ease !important;
}
.c-project-item:hover .portfolio_bg {
    background-color: #9E2222 !important;
}

/* Portfolio section — heading + testimonial separation */
section[showcase="section"] .c-heading-3,
section[showcase="section"] .c-overhead,
section[showcase="section"] .c-title02--gd1--cd12 {
    opacity: 1 !important;
    filter: none !important;
}
section[showcase="section"] + section[white] {
    margin-top: 2em !important;
    border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
}

/* Work/portfolio page — decorative graphic: red, from left */
video.c-graphic.cc-portfolio {
    filter: grayscale(1) sepia(1) hue-rotate(-30deg) saturate(6) brightness(0.8) !important;
    position: absolute !important;
    left: 0 !important;
    right: auto !important;
    bottom: 0 !important;
    width: 60% !important;
    transform: scaleX(-1) !important;
}

/* Work/portfolio page — CTA wrappers in portfolio grid */
.c-grid-12-col.cc-portfolio > .c-cta-wrapper.cc-24 {
    grid-column: span 2 !important;
    align-self: center !important;
}

/* Contact page — reduce gap between testimonials and FAQ */
.body--contact .c-contact_content.cc-mobile-off {
    margin-bottom: 1em !important;
}
.body--contact .c-contact_content:not(.cc-mobile-off) {
    padding-top: 0 !important;
}

/* Work/portfolio page — force testimonial section visible */
.c-quotes_item--cd6--sd5 .c-home-testimonials_wrapper,
.c-quotes_item--cd6--sd5 .c-home-testimonial_image,
.c-quotes_item--cd6--sd5 .c-text-1,
.c-quotes_item--cd6--sd5 .c-text-3,
.c-quotes_item--cd6--sd5 .c-text-4,
.c-quotes_item--cd6--sd5 [testimonials-slider] {
    opacity: 1 !important;
    filter: none !important;
}

/* Contact page — force FAQ accordion + social icons visible (GSAP simple-blur never fires) */
.body--contact [simple-blur],
.body--contact .c-accordions,
.body--contact .c-accordion,
.body--contact .c-accordion_dropdown,
.body--contact .c-accordion_dropdown-toggle,
.body--contact .c-accordion_dropdown-toggle h3,
.body--contact .c-contact_content,
.body--contact .c-footer_socials--cd3 {
    opacity: 1 !important;
    filter: none !important;
    visibility: visible !important;
}
/* Contact page — force all GSAP-hidden text visible */
.body--contact .c-text-1,
.body--contact .c-heading-3,
.body--contact .c-heading-6,
.body--contact .c-line,
.body--contact .c-button,
.body--contact .c-overhead,
.body--contact .a-img,
.body--contact [asset-reveal] {
    opacity: 1 !important;
    filter: none !important;
}

/* Footer underlay — don't block scroll or bleed through main content */
.c-footer-underlay {
    pointer-events: none !important;
}
.c-footer-underlay a,
.c-footer-underlay button,
.c-footer-underlay [role="button"] {
    pointer-events: auto !important;
}
/* Solid bg on footer-wrap so fixed underlay never shows through gaps */
.footer-wrap {
    background-color: #000000 !important;
}

/* Stripes video — black bg, red lines, rotated 180deg, aligned to heading */
.c-graphic.cc-home-stats {
    position: absolute !important;
    top: -50% !important;
    left: 0 !important;
    right: auto !important;
    width: 100% !important;
    height: 150% !important;
    filter: grayscale(1) sepia(1) hue-rotate(-50deg) saturate(8) brightness(0.7) !important;
    opacity: 0.4 !important;
    z-index: 0 !important;
    pointer-events: none !important;
    transform: rotate(180deg) !important;
}
/* Parent section needs positioning context */
section[white].c-section:has(.c-graphic.cc-home-stats) {
    position: relative !important;
    background-color: #000000 !important;
    overflow: hidden !important;
}
/* Ensure content is above stripes video */
section[white].c-section:has(.c-graphic.cc-home-stats) .c-container {
    position: relative !important;
    z-index: 1 !important;
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}
