/**
 * Douro Digital Global Overrides
 * Shared across all pages: nav, footer, buttons, a11y, backgrounds, scroll fixes
 */

/* Left-panel menu — Refokus-style slide-in */
.c-nav_menu {
    border: none !important;
    border-right: 1px solid rgba(255, 255, 255, 0.08) !important;
    border-radius: 0 !important;
    width: 420px !important;
    max-width: 90vw !important;
    right: auto !important;
    height: 100dvh !important;
    margin: 0 !important;
    transition-property: transform !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
    padding: 2em 2em 1.5em !important;
}
/* Hide menu scrollbar */
.c-nav_menu::-webkit-scrollbar {
    display: none;
}
.c-nav_menu {
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
}
/* Menu backdrop — darken right side when menu is open */
.nav-menu_bg-click {
    background-color: rgba(0, 0, 0, 0.5) !important;
    backdrop-filter: blur(2px) !important;
}
/* Nav list fills space, pushes mini-links to bottom */
.c-nav_list {
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
    flex: 1 !important;
    overflow-y: auto !important;
}
/* Tighter nav item spacing */
.c-nav_menu .c-nav_link {
    margin-bottom: 0 !important;
    padding-top: 10px !important;
    padding-bottom: 10px !important;
}
.c-nav_menu .c-nav_link.cc-solutions {
    margin-bottom: 0 !important;
    padding-top: 6px !important;
    padding-bottom: 6px !important;
}
.c-nav_list_group.cc-contact {
    margin-top: auto !important;
    margin-bottom: 0 !important;
}
/* Mini-links at bottom — 2 column grid */
.c-nav_list_group.mini-links {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 0.5em 2em !important;
    margin-top: auto !important;
    padding-top: 2em !important;
    border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
}
.c-mini-link_wrapper {
    font-size: 0.85em !important;
    opacity: 0.6 !important;
    transition: opacity 0.3s !important;
}
.c-mini-link_wrapper:hover {
    opacity: 1 !important;
}

/* Services dropdown underline — uses base absolute positioning */
/* Nav dropdown — proper Refokus structure */
.c-nav_solutions {
    display: flex;
    flex-direction: column;
    gap: 0;
    margin-top: 0.5em;
}
.c-nav_link.cc-solutions {
    display: flex !important;
    align-items: center !important;
    gap: 1em !important;
    padding: 0.4em 0 !important;
}
.c-nav_link-preview {
    width: 48px !important;
    height: 48px !important;
    border-radius: 6px !important;
    overflow: hidden !important;
    flex-shrink: 0 !important;
}
.c-nav_link-preview-img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
}
.c-nav_link-text .c-text-4 {
    font-size: 0.85em !important;
}
.c-nav_link-text .c-text-4.cc-gray {
    color: rgba(255, 255, 255, 0.5) !important;
    font-size: 0.75em !important;
}
.c-nav-dropdown_cross-wrapper {
    position: relative !important;
    width: 16px !important;
    height: 16px !important;
    margin-left: auto !important;
    flex-shrink: 0 !important;
}
.c-nav-dropdown_line {
    position: absolute !important;
    top: 50% !important;
    left: 0 !important;
    width: 100% !important;
    height: 1.5px !important;
    background-color: currentColor !important;
    transform: translateY(-50%) !important;
    transition: transform 0.3s ease !important;
}
.c-nav-dropdown_line.cc-rotate {
    transform: translateY(-50%) rotate(90deg) !important;
}
.c-nav_list_dropdown.cc-active .c-nav-dropdown_line.cc-rotate {
    transform: translateY(-50%) rotate(0deg) !important;
}

/* Mini-links (News & Insights, LinkedIn, Instagram, Twitter) — white text */
.c-mini-link_wrapper,
.c-mini-link_wrapper div,
.c-mini-link_text-wrapper,
.c-mini-link_text-wrapper div {
    color: #ffffff !important;
    opacity: 1 !important;
}

/* Services dropdown trigger layout */
.c-nav_dropdown-trigger {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    cursor: pointer !important;
}

/* Fix: Logo always white */
.c-nav_brand-logo img {
    filter: brightness(0) invert(1) !important;
}

/* Hero title: full width, left-aligned */
.c-title02--gd1--cd12 {
    width: 100%;
}
.c-title02_text--cd8--sd5 {
    --col-start: 1;
    --col-span: 12;
    grid-column-start: 1 !important;
    grid-column-end: -1 !important;
    width: 100% !important;
    max-width: 100% !important;
}

/* Services section: reduce top padding so "Reclaim 20 Hours" starts near nav */
.c-hero + section[white].c-section {
    padding-top: 2em !important;
}

/* Services section above logos — reduce bottom padding */
section[white].c-section:has(+ section:has(.c-logos)) {
    padding-bottom: 2em !important;
}
/* Marquee logos section: even top/bottom */
section[white].c-section:has(.c-logos) {
    padding-top: 2em !important;
    padding-bottom: 2em !important;
}
.c-logos {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}
/* Also target parent section directly */
.c-logos ~ *,
.c-logos {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}

/* Marquee logos: white, consistent height, natural width */
.c-marquee_logo {
    filter: brightness(0) invert(1) !important;
    width: auto !important;
    max-width: none !important;
    height: 28px !important;
    opacity: 0.7;
}

/* Ensure marquee items don't overlap */
.c-marquee .w-dyn-item {
    flex-shrink: 0 !important;
    padding: 0 2.5em !important;
}

/* Improved button contrast */
.c-button {
    transition: all 0.3s ease;
}

.c-button:hover {
    transform: translateY(-2px);
}

.c-button:focus {
    outline: 2px solid #0066cc;
    outline-offset: 4px;
}

/* Link contrast improvements */
a {
    text-decoration-skip-ink: auto;
}

a:focus-visible {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
    border-radius: 2px;
}

/* Hide Webflow partner badge */
.c-webflow-badge,
a:has(.c-webflow-badge) {
    display: none !important;
}

/* Remove Refokus-specific external dependencies that might block */
iframe[src*="intellimize"],
script[src*="intellimize"],
link[href*="intellimize"] {
    display: none !important;
}

/* Ensure content is never hidden by anti-flicker */
.anti-flicker,
.anti-flicker * {
    visibility: visible !important;
    opacity: 1 !important;
}

/* Footer CTAs — red default, white hover */
.c-services {
    background-color: #8B1A1A !important;
}

.c-services,
.c-get-in-touch {
    transition: background-color 0.5s cubic-bezier(0.22, 1, 0.36, 1),
                color 0.5s cubic-bezier(0.22, 1, 0.36, 1),
                transform 0.5s cubic-bezier(0.22, 1, 0.36, 1) !important;
}
.c-services:hover,
.c-get-in-touch:hover {
    transform: scale(1.02) !important;
}

/* Always show the hidden text blocks */
.c-footer-cta-block.cc-2,
.c-footer-cta-block.cc-2-git {
    max-height: none !important;
    overflow: visible !important;
}

/* Both sections: white bg + black text on hover */
.c-services:hover,
.c-get-in-touch:hover {
    background-color: #ffffff !important;
    color: #1a1a1a !important;
}
.c-services:hover .c-overhead,
.c-services:hover .c-heading-6,
.c-services:hover .c-heading-3,
.c-services:hover .c-text-1,
.c-services:hover .c-text-4,
.c-services:hover p,
.c-get-in-touch:hover .c-overhead,
.c-get-in-touch:hover .c-heading-6,
.c-get-in-touch:hover .c-heading-3,
.c-get-in-touch:hover .c-text-1,
.c-get-in-touch:hover .c-text-4,
.c-get-in-touch:hover p {
    color: #1a1a1a !important;
}
.c-services:hover .c-footer-ctas-arrow svg,
.c-services:hover .c-button svg,
.c-get-in-touch:hover .c-footer-ctas-arrow svg,
.c-get-in-touch:hover .c-button svg {
    color: #1a1a1a !important;
}
.c-services:hover .c-button_line rect,
.c-get-in-touch:hover .c-button_line rect {
    fill: #1a1a1a !important;
}

/* Red hover theme — "Learn more" service links + Portfolio + buttons */
.c-service-row_link:hover,
.c-service-row_link:hover .c-service-row_link-text,
.c-service-row_link:hover .c-service-row_link-arrow,
.c-button:hover,
.c-button:hover .c-text-1,
.c-button:hover .c-button_text-wrap,
.c-button:hover .c-button_arrow-wrap {
    color: #FF0000 !important;
}
.c-service-row_link:hover svg path,
.c-button:hover svg path {
    stroke: #FF0000 !important;
}
.c-button:hover .c-button_line rect {
    fill: #FF0000 !important;
}

/* Force scroll to always work — override Webflow/GSAP overflow locks */
html, body {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    overscroll-behavior: auto !important;
}

/* Force all backgrounds to pure black (except footer + homepage hero) */
body,
html,
.page-wrapper,
.c-section,
section,
section[white],
.c-section.cc-hero-about,
[theme],
[theme="dark"],
.portfolio_bg,
[section-theme]:not(.c-hero),
[section-theme="dark"]:not(.c-hero),
main,
article {
    background-color: #000000 !important;
    background-image: none !important;
    background: #000000 !important;
}

/* Hide hero gradient/video overlays — force pure black */
.c-gradient,
.c-bg video,
.c-hero .c-bg,
.c-section.cc-hero-about .c-bg,
.c-section.cc-hero-about .c-gradient {
    display: none !important;
}

/* Service page hero backgrounds — pure black */
.c-section.cc-hero-about,
.c-section.cc-cs-hero,
.c-section.cc-hero-about .c-hero-wrap,
.c-section.cc-hero-about .c-hero_text,
section:not(.c-hero)[section-theme="dark"],
.c-hero_intro,
.c-hero_intro.cc-about {
    background: #000000 !important;
    background-color: #000000 !important;
    background-image: none !important;
}

/* Force all section backgrounds black */
section[white],
section[white].c-section,
section[white].c-section.cc-pb0,
section.c-section,
.c-section.cc-dark-0,
.c-section.cc-no-overflow {
    background: #000000 !important;
    background-color: #000000 !important;
}

html.animating,
.animating body {
    overflow-y: auto !important;
}

/* Hydration safety — when [no-animation] is set, force GSAP SplitText spans visible */
[no-animation] .char,
[no-animation] .word,
[no-animation] .line {
    opacity: 1 !important;
    filter: none !important;
    transform: none !important;
}

/* Smooth scrolling — only for anchor links, not on <html> (conflicts with GSAP ScrollTrigger) */
a[href^="#"] {
    scroll-behavior: smooth;
}

/* Service pages: eliminate the sticky hero dead zone */
.c-section.cc-hero-about {
    position: relative !important;
    top: 0 !important;
}

/* Improved focus indicators for keyboard navigation */
*:focus-visible {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
}

/* Ensure videos don't autoplay with sound */
video {
    muted: true;
}

/* Print styles */
@media print {
    .c-nav,
    .c-footer,
    video,
    .c-button_arrow-wrap {
        display: none !important;
    }

    .c-section {
        page-break-inside: avoid;
    }

    a::after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
        color: #666;
    }
}

/* Footer underlay — don't block scroll or bleed through main content */
.c-footer-underlay {
    pointer-events: none !important;
    background: url(../images/footer-bg.png) center bottom / cover no-repeat #000 !important;
}
.c-footer-underlay a,
.c-footer-underlay button,
.c-footer-underlay [role="button"] {
    pointer-events: auto !important;
}
/* Fix button arrow/line clipping */
.c-section.cc-footer .c-button.cc-main,
.c-testimonial--gd1--cd12 .c-button.cc-main,
.c-footer-underlay .c-button.cc-main,
.c-project-item .c-button.cc-main {
    overflow: visible !important;
}

/* Solid bg on footer-wrap so fixed underlay never shows through gaps */
.footer-wrap {
    background-color: #000000 !important;
}

/* Stripes video — hide on all pages */
.c-graphic.cc-home-stats {
    display: none !important;
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}
